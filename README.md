# push_swap
push_swap project @ school 42

- Task description: [push_swap](.test/push_swap.pdf)
- Based on the [Turk algorithm](https://medium.com/@ayogun/push-swap-c1f5d2d41e97) by A. Yigit Ogun
- and an easy to digest [video presentation](https://www.youtube.com/watch?v=wRvipSG4Mmk&t=1272s) by Thuggonaut.
- The strategy in a few sentences:
  - push the cheapest node from stack `a` to `b` in such a way that in the end we'll have the `b` reverse sorted.
    - cheapest means the less operations needed
    - we push all but 3, because it's cheaper to sort in place those remaining 3 and then get back the nodes from `b` to `a`
    ```c
    // we want to push elements from A to B so that nodes are in reverse order in B
    // target position in B: the node on top of which we're pushing the node from A
    // this is the largest element in B that is smaller than the node in A
    // if all nodes in B are bigger than node in A, target will be the largest in B
    /* example:
                   3 ---         >
                                     21 ---------------------
                   9 ---------   >
                                      8 --------
                                      6 ------
                        A                  B
    ```
    - when the node to be pushed from `a` is smaller then all the elements in `b` then we push it on top of the largest element in `b` because by a simple rotation in `b` we can always restore the decreasing order
  - after everything but 3 pushed to `a` we sort in place the remaining 3 nodes and we execute a simplified reverse logic to push back the nodes from `b` to `a`.
    - the logic is simplified because this time we don't rotate `b`, since that is already in reverse order, we just push whatever is on the top back to `a`
    - we need to rotate `a` from time-to-time because of those 3 nodes left there might intertwine into our reverse sorted values in `b`
    ```c
    // calculates the target position in stack A for the top element of B
    // we use the inverse of the logic used for A->B
    // get the smallest index in A that is still larger than B's top node index
    // Edge case: if b_index is larger than everything in A, target is the smallest node
    /* example:
                              <   ----------------- 21
          6 ------
                              <   --------- 9
          10 ----------
          17 -----------------
              A                         B
    ```
    - we then make a final rotation of `a` to put the smallest element on the top
- `make` or `make all` compiles `push_swap`
- `make bonus` compiles the `checker`
- in the `.test` directory there is a small python random number generator

```bash
neat@dellw:/mnt/c/Users/dajcs/code/push_swap/.test$ ./push_test.py -h
usage: push_test.py [-h] low high count

Generate distinct random integers in the given inclusive range.

positional arguments:
  low         Lowest integer in the range (inclusive)
  high        Highest integer in the range (inclusive)
  count       Number of integers to generate

options:
  -h, --help  show this help message and exit
```

- the sorting operations generated by `../push_swap` can be tested with the provided tester `./checker_linux` or with our bonus `../checker`
- just run `./push_test.py` in the `.test` directory and copy/paste the printout into the terminal:

```bash
neat@dellw:/mnt/c/Users/dajcs/code/push_swap/.test$ ./push_test.py -555 555 500

ARG="-64 -391 -374 -326 10 -208 -324 159 363 397 -439 267 -305 -234 312 549 -53 339 -231 -471 400 -323 -340 -429 -101 -35 395 -191 -189 146 283 504 -56 -186 -529 536 -179 -428 -18 -59 511 6 38 -144 -464 550 11 -290 396 55 340 19 -104 -344 300 -82 211 -118 -99 -67 539 -54 462 -438 -247 386 -536 233 -265 348 265 271 544 28 -278 435 530 166 -188 523 196 429 -343 -264 -8 329 -111 -372 -527 70 -436 -138 -412 -94 -407 74 51 -217 -432 -371 352 410 -190 -176 417 471 260 195 -312 -525 -531 -80 -345 -383 54 -223 -285 -322 -221 165 553 252 317 -519 -493 120 -50 -49 -163 82 440 551 212 -449 -23 461 40 -79 -540 433 -338 361 -180 -9 -277 -183 -506 -61 210 548 -521 262 127 -201 -433 213 470 259 -503 -442 -103 -472 -423 12 209 -62 26 476 -483 464 85 327 160 -222 -78 399 198 -197 -360 517 -16 104 142 -55 -296 -207 228 -120 181 388 -307 106 254 239 277 -400 47 284 202 330 -409 -235 430 151 -300 -362 -81 -42 309 118 -177 354 -348 76 97 230 -40 333 200 450 173 -131 -337 -416 -507 -329 -266 205 347 136 -161 472 179 -224 -184 507 477 -368 -239 -280 -279 -236 -102 155 -72 -291 420 242 394 -497 -218 -505 -306 122 -145 385 98 368 -294 406 -389 -230 -549 143 124 505 278 188 -431 -286 369 -227 -4 -24 360 207 515 432 -469 516 -92 422 298 -90 346 -182 24 45 540 109 -299 -51 358 -282 -58 -29 -458 547 -63 77 -461 -119 135 -495 -196 -494 -297 480 496 292 -541 362 -496 437 113 177 -330 43 39 87 -382 335 428 147 -248 186 227 -146 -488 -253 -254 297 479 454 377 -69 162 153 33 287 93 5 -93 -149 -11 -357 -308 240 -552 466 538 -32 199 445 -6 -192 -259 521 -166 -468 367 -395 -137 52 -245 533 449 119 -125 -100 112 -522 161 178 -107 156 226 89 532 139 509 -199 -34 251 531 -251 281 -36 117 -538 194 -452 451 176 -157 -96 -273 316 -139 -86 376 -255 353 -130 221 -533 -485 65 -394 444 286 436 498 -516 355 -140 -547 -376 -319 -359 331 -474 75 -419 345 308 -487 -68 206 375 -75 30 441 220 -268 412 -346 80 42 128 218 -73 491 1 -19 -447 169 53 -390 -459 -95 325 -134 409 356 366 -388 288 -172 -520 478 78 -205 321 86 14 -156 -269 -385 71 158 282 -241 238 132 -85 495 520 167 446 246 -153 222 -422 134 268 -210 -257 -402 -309 -378 172 -539 492 -480 -249 524 314 -327 244";
export ARG

../push_swap $ARG | wc -l
../push_swap $ARG | ./checker_linux $ARG
../push_swap $ARG | ../checker $ARG

neat@dellw:/mnt/c/Users/dajcs/code/push_swap/.test$ ARG="-64 -391 -374 -326 10 -208 -324 159 363 397 -439 267 -305 -234 312 549 -53 339 -231 -471 400 -323 -340 -429 -101 -35 395 -191 -189 146 283 504 -56 -186 -529 536 -179 -428 -18 -59 511 6 38 -144 -464 550 11 -290 396 55 340 19 -104 -344 300 -82 211 -118 -99 -67 539 -54 462 -438 -247 386 -536 233 -265 348 265 271 544 28 -278 435 530 166 -188 523 196 429 -343 -264 -8 329 -111 -372 -527 70 -436 -138 -412 -94 -407 74 51 -217 -432 -371 352 410 -190 -176 417 471 260 195 -312 -525 -531 -80 -345 -383 54 -223 -285 -322 -221 165 553 252 317 -519 -493 120 -50 -49 -163 82 440 551 212 -449 -23 461 40 -79 -540 433 -338 361 -180 -9 -277 -183 -506 -61 210 548 -521 262 127 -201 -433 213 470 259 -503 -442 -103 -472 -423 12 209 -62 26 476 -483 464 85 327 160 -222 -78 399 198 -197 -360 517 -16 104 142 -55 -296 -207 228 -120 181 388 -307 106 254 239 277 -400 47 284 202 330 -409 -235 430 151 -300 -362 -81 -42 309 118 -177 354 -348 76 97 230 -40 333 200 450 173 -131 -337 -416 -507 -329 -266 205 347 136 -161 472 179 -224 -184 507 477 -368 -239 -280 -279 -236 -102 155 -72 -291 420 242 394 -497 -218 -505 -306 122 -145 385 98 368 -294 406 -389 -230 -549 143 124 505 278 188 -431 -286 369 -227 -4 -24 360 207 515 432 -469 516 -92 422 298 -90 346 -182 24 45 540 109 -299 -51 358 -282 -58 -29 -458 547 -63 77 -461 -119 135 -495 -196 -494 -297 480 496 292 -541 362 -496 437 113 177 -330 43 39 87 -382 335 428 147 -248 186 227 -146 -488 -253 -254 297 479 454 377 -69 162 153 33 287 93 5 -93 -149 -11 -357 -308 240 -552 466 538 -32 199 445 -6 -192 -259 521 -166 -468 367 -395 -137 52 -245 533 449 119 -125 -100 112 -522 161 178 -107 156 226 89 532 139 509 -199 -34 251 531 -251 281 -36 117 -538 194 -452 451 176 -157 -96 -273 316 -139 -86 376 -255 353 -130 221 -533 -485 65 -394 444 286 436 498 -516 355 -140 -547 -376 -319 -359 331 -474 75 -419 345 308 -487 -68 206 375 -75 30 441 220 -268 412 -346 80 42 128 218 -73 491 1 -19 -447 169 53 -390 -459 -95 325 -134 409 356 366 -388 288 -172 -520 478 78 -205 321 86 14 -156 -269 -385 71 158 282 -241 238 132 -85 495 520 167 446 246 -153 222 -422 134 268 -210 -257 -402 -309 -378 172 -539 492 -480 -249 524 314 -327 244";
export ARG

../push_swap $ARG | wc -l
../push_swap $ARG | ./checker_linux $ARG
../push_swap $ARG | ../checker $ARG
4906
OK
OK
neat@dellw:/mnt/c/Users/dajcs/code/push_swap/.test$
```
